<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="paquete">
    
    <select id="obtenerPaquete" resultType="pojo.Paquete">
     SELECT idPaquete, paquete.descripcion, paquete.peso, paquete.alto, paquete.profundidad, paquete.ancho, paquete.numGuia
     FROM paquete
    </select>
    
    <select id="obtenerPaqueteEnvio"  resultType="pojo.Paquete"> 
    SELECT  p.idPaquete,p.descripcion,p.peso,p.alto,p.profundidad,p.ancho,e.idEnvio AS 'Envio'
    FROM Paquete p
    INNER JOIN Envio e ON e.idEnvio = p.idEnvio
    WHERE e.idEnvio = #{idEnvio};
    </select>
    
    <select id="obtenerPaquetenumGuia"  resultType="pojo.Paquete"> 
    SELECT se.estatus,CONCAT(d.calle, d.numero, d.colonia, d.codigoPostal) AS origen,CONCAT(d2.calle, d2.numero, d2.colonia, d2.codigoPostal, d2.estado, d2.ciudad) AS destino,
    p.descripcion,c.nombre,e.numGuia,p.peso,p.alto,p.profundidad,p.ancho
    FROM EstatusEnvio se
    INNER JOIN Envio e ON e.idEnvio = se.idEnvio
    INNER JOIN direccionorigen d ON d.idOrigen = e.idOrigen
    INNER JOIN direcciondestino d2 ON d2.idDestino = e.idDestino
    INNER JOIN Paquete p ON p.idPaquete = e.idPaquete
    INNER JOIN Cliente c ON c.idCliente = e.idCliente
    WHERE e.numGuia = #{numGuia};
    
    </select>
  
    <insert id="registrarPaquete" parameterType="pojo.Paquete">
    INSERT INTO Paquete(idEnvio, descripcion, peso, alto, profundidad, numGuia)
        VALUES(#{idEnvio},#{descripcion},#{peso},#{alto},#{profundidad},#{numGuia})
            
    </insert>
    
    <select id="consultarPaquete" resultType="pojo.Paquete">
      SELECT * FROM Paquete WHERE idEnvio = #{idEnvio};
    </select>
    
    <update id="editarPaquete" parameterType="pojo.Paquete">
      Update paquete
      SET descripcion = #{descripcion}, peso = #{peso}, alto = #{alto}, profundidad = #{profundidad}, ancho = #{ancho}, numGuia = #{numGuia}
      WHERE idPaquete = #{idPaquete}
    </update>
     
    <delete id="eliminarPaquete" parameterType="pojo.Paquete">
        DELETE
        FROM paquete
        WHERE idPaquete = #{idPaquete}
    </delete>

    
</mapper>
