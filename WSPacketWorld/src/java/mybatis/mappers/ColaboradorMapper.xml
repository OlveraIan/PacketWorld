<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="colaborador">
    <insert id="insertar" parameterType="pojo.peticion.CrearColaboradorPeticion" statementType="CALLABLE">
        {CALL SP_REGISTRAR_COLABORADOR(
            #{nombre, mode=IN, jdbcType=VARCHAR}, 
            #{apellidoPaterno, mode=IN, jdbcType=VARCHAR}, 
            #{apellidoMaterno, mode=IN, jdbcType=VARCHAR}, 
            #{curp, mode=IN, jdbcType=VARCHAR}, 
            #{correo, mode=IN, jdbcType=VARCHAR}, 
            #{password, mode=IN, jdbcType=VARCHAR}, 
            #{idRol, mode=IN, jdbcType=INTEGER},
            #{idSucursal, mode=IN, jdbcType=INTEGER},
            #{foto, mode=IN, jdbcType=BLOB},
            #{numLicencia, mode=IN, jdbcType=VARCHAR}
        )}
    </insert>
    
    <update id="editarColaborador" statementType="CALLABLE">     
        {CALL SP_EDITAR_COLABORADOR(
            #{numeroPersonal, mode=IN, jdbcType=INTEGER},
            #{nombre, mode=IN, jdbcType=VARCHAR}, 
            #{apellidoPaterno, mode=IN, jdbcType=VARCHAR}, 
            #{apellidoMaterno, mode=IN, jdbcType=VARCHAR}, 
            #{curp, mode=IN, jdbcType=VARCHAR}, 
            #{correo, mode=IN, jdbcType=VARCHAR}, 
            #{password, mode=IN, jdbcType=VARCHAR}, 
            #{idSucursal, mode=IN, jdbcType=INTEGER},
            #{foto, mode=IN, jdbcType=BLOB},
            #{numLicencia, mode=IN, jdbcType=VARCHAR}
        )}
    </update>
    
    <delete id="eliminarColaborador" statementType="CALLABLE">
        {CALL SP_ELIMINAR_COLABORADOR(
            #{numPersonal, mode=IN, jdbcType=INTEGER}
        )}
    </delete>
    
    <select id="todos" resultType="pojo.Colaborador">
        SELECT * FROM vw_colaboradores_activos_detalle;
    </select>
    
    <select id="obtenerColaborador" resultType="pojo.Colaborador" statementType="CALLABLE">
        {CALL SP_BUSCAR_COLABORADOR(
            #{nombre, mode=IN, jdbcType=VARCHAR},
            #{numeroPersonal, mode=IN, jdbcType=INTEGER},
            #{rol, mode=IN, jdbcType=VARCHAR}
        )}       
    </select>   
    
</mapper>
